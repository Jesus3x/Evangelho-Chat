<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conexﾃ｣o Verbo Real-Time</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e67e22;
            --whatsapp: #25d366;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            /* IMAGEM DE FUNDO SUBSTITUﾃ昂EL ABAIXO */
            background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1438232992991-995b7058bbb3?auto=format&fit=crop&q=80&w=2000');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        header { background: rgba(44, 62, 80, 0.9); color: white; padding: 15px; text-align: center; backdrop-filter: blur(5px); }

        #chat-container {
            flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px;
        }

        .message { max-width: 80%; padding: 12px 16px; border-radius: 15px; line-height: 1.4; font-size: 15px; }
        .bot { background: rgba(255,255,255,0.95); align-self: flex-start; color: #333; }
        .user { background: var(--primary); color: white; align-self: flex-end; }

        .video-container { position: relative; padding-bottom: 56.25%; height: 0; margin-top: 10px; border-radius: 8px; overflow: hidden; }
        .video-container iframe { position: absolute; width: 100%; height: 100%; border: 0; }

        .input-area { background: white; padding: 15px; display: flex; gap: 10px; }
        input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 25px; outline: none; }
        
        .btn-pastor {
            position: fixed; bottom: 85px; right: 20px; background: var(--whatsapp);
            color: white; padding: 12px 20px; border-radius: 30px; text-decoration: none; font-weight: bold;
        }
    </style>
</head>
<body>

<header>CONEXﾃグ VERBO</header>

<div id="chat-container"></div>

<a href="https://wa.me/SEUNUMERO" target="_blank" class="btn-pastor">町 Pastor Online</a>

<div class="input-area">
    <input type="text" id="userInput" placeholder="Busque uma palavra ou desabafe...">
    <button onclick="enviarMensagem()" style="border:none; background:var(--accent); color:white; border-radius:50%; width:45px; cursor:pointer;">筐､</button>
</div>

<script>
    // 1. CONFIGURAﾃﾃグ FIREBASE (Substitua pelos seus dados do console)
    const firebaseConfig = {
        apiKey: "SUA_API_KEY",
        authDomain: "SEU_PROJETO.firebaseapp.com",
        projectId: "SEU_PROJETO",
        storageBucket: "SEU_PROJETO.appspot.com",
        messagingSenderId: "ID",
        appId: "APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 2. RETENﾃﾃグ: Versﾃｭculo do Dia ao Abrir
    window.onload = () => {
        const versiculos = [
            "笨ｨ 'O Senhor ﾃｩ meu pastor, nada me faltarﾃ｡.' (Salmo 23)",
            "櫨 'Tudo posso naquele que me fortalece.' (Filipenses 4:13)",
            "剏 'O choro dura uma noite, mas a alegria vem pela manhﾃ｣.' (Salmo 30:5)"
        ];
        const sorteado = versiculos[Math.floor(Math.random() * versiculos.length)];
        renderMsg(sorteado, 'bot');
    };

    // 3. FUNﾃﾃグ DE ENVIO E CHAT REAL
    async function enviarMensagem() {
        const input = document.getElementById('userInput');
        const texto = input.value.trim();
        if(!texto) return;

        renderMsg(texto, 'user');
        input.value = "";

        // SALVAR NO FIREBASE (Isso cria um histﾃｳrico real que o pastor pode ler)
        await db.collection("mensagens").add({
            texto: texto,
            data: new Date(),
            origem: "usuario"
        });

        // Lﾃｳgica de resposta do Bot (mesma das versﾃｵes anteriores)
        processarRespostaBot(texto.toLowerCase());
    }

    function processarRespostaBot(texto) {
        // Exemplo simples de gatilho
        if(texto.includes("ansiedade")) {
            renderMsg("Deus cuida de vocﾃｪ. Assista:<br><div class='video-container'><iframe src='https://www.youtube.com/embed/p_i9u7Xm_Yw'></iframe></div>", 'bot');
        } else {
            renderMsg("Recebi sua mensagem. Gostaria de uma oraﾃｧﾃ｣o ou de ver um vﾃｭdeo sobre esperanﾃｧa?", 'bot');
        }
    }

    function renderMsg(texto, tipo) {
        const chat = document.getElementById('chat-container');
        const div = document.createElement('div');
        div.className = `message ${tipo}`;
        div.innerHTML = texto;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }
</script>
</body>
</html>
